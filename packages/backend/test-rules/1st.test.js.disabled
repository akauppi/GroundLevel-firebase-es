/*
* back-end/test-rules/1st.test.js
*
*
*/
import { describe, test } from '@jest/globals'

import { collection } from 'firebase-jest-testing/firestoreRules'

describe("*** Priming the client ***", () => {

  test('warm up the Firestore client', async () => {
    const coll = collection('projects');
    const unauth_projectsC = coll.as(null);

    // Warm up the client so first test won't take > 2000 ms  (drops from 2337 -> 282 ms on DC (macOS))
    //
    // Note: This has nothing to do with this particular test file, or the Firestore collection. This just happens
    //    to be first (but ordering in Jest is a slippery thing.. and may change). Is there a way to run things, ahead of *all* Jest
    //    tests, but not in the Global Setup node environment. Can move this there.
    //
    /*await*/ unauth_projectsC.get();
  }, 9999)
    //
});
