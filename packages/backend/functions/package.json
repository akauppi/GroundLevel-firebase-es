{
  "name": "functions",
  "private": true,
  "type": "module",
  "engines": {
    "node": "16"
  },
  "dependencies": {
    "@google-cloud/firestore": "^5.0.2",
    "firebase-admin": "^11.0.0",
    "firebase-functions": "^3.22.0"
  },
  "scripts": {
    "preinstall": "npm run -s _checkEnv",
    "_checkEnv": "[ ! -z $BUILDER_OUTPUT$NO_GUARD ] || ( >&2 echo \"You don't need to do 'npm install' in this folder.\"; false )"
  },
  "//": {
    "engines.node": [
      "Firebase emulators require the field to be plain '16'. We run it under DC, using Node 18. This causes a warning,",
      "but doesn't seem harmful."
    ],
    "dependencies": {
      "@google-cloud/firestore": [
        "Optional dep of 'firebase-admin'"
      ]
    },
    "scripts": {
      "_checkEnv": [
        "Guards again the developer locally running 'npm install'. Actual use cases:",
        "- manual deployment (first/*; DC)",
        "- CI (deployment)",
        "- Cloud Functions (runtime)",
        [
          "Env.vars in runtime:",
          "",
          "GOOGLE_RUNTIME=nodejs16",
          "GOOGLE_CONTAINER_MEMORY_HINT_MB=256",
          "X_GOOGLE_TARGET_PLATFORM=gcf",
          "BUILDER_OUTPUT=/builder/outputs",
          "GOOGLE_FUNCTION_TARGET=cloudLoggingProxy_v0"
        ]
      ]
    }
  }
}
