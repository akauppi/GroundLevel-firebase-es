{
  "name": "@local/app",
  "description": "Sample front end (development, build)",
  "license": "MIT",
  "private": true,
  "author": "<akauppi@gmail.com>",
  "type": "module",
  "files": [
    "dist/*"
  ],
  "exports": {
    ".": "./dist/app.es.js"
  },
  "bin": {
    "check-no-links": "./tools/check-no-links.sh",
    "gen-vite-env-local": "./tools/gen-vite-env-local.js",
    "gen-vite-env-online": "./tools/gen-vite-env-online.js"
  },
  "engines": {
    "node": ">= 14.3 || >= 16 <16.6 || >=16.6.1"
  },
  "scripts": {
    "dev": "npm run dev:local",
    "-- ": "",
    "test": "npm run -s _genEnvLocal && npm run -s _touchEm && docker compose --env-file ./.env.dc run --rm vite-launched && CYPRESS_defaultCommandTimeout=10000 cypress run",
    "-- -": "",
    "dev:local": "npm run -s _genEnvLocal && npm run -s _touchEm && docker compose --env-file ./.env.dc run --rm vite-primed",
    "dc:launch": "npm install --no-save esbuild && vite --mode dev_local",
    "--  -": "",
    "ci:launch": "npm run -s _genEnvLocal && vite --mode dev_local",
    "ci:build": "vite build",
    "-- --": "",
    "dev:online": "npm run -s _genEnvOnline && docker compose -f docker-compose.online.yml run --rm vite-3001-launched",
    "dc:launch:online": "npm install --no-save esbuild && vite",
    "--   -": "",
    "lint": "eslint --ext .js,.vue src",
    "-- - -": "",
    "build": "npm run -s _checkNoLinks && npm run -s _macNudgeEsbuild && vite build",
    "--  --": "",
    "_checkNoLinks": "check-no-links || ( >&2 echo \"ERROR: 'npm' links not allowed in a production build. Use them only at development.\n\tUse 'npm list' to see them; 'npm unlink x; npm install' to remove.\n\"; false)",
    "//_checkStaging": "[[ -f ../../firebase.${ENV-staging}.js ]] || ( >&2 echo \"ERROR: '../../firebase.${ENV-staging}.js' is missing; see 'README.md' on how to create one.\n\"; false)",
    "_genEnvLocal": "gen-vite-env-local --project=demo-abc > .env.dev_local",
    "_genEnvOnline": "gen-vite-env-online > .env.development",
    "-- ---": "",
    "postbuild": "cp public/* dist/",
    "postinstall": "[ -z $BUILDER_OUTPUT ] || npm run -s _touchEm",
    "--    -": "",
    "_touchEm": "touch firebase-debug.log firestore-debug.log ui-debug.log",
    "_macNudgeEsbuild": "!(uname -a | grep -q \"^Darwin\") || npm install --no-save esbuild"
  },
  "dependencies": {
    "@firebase/app": "file:../../node_modules/@firebase/app",
    "@firebase/auth": "file:../../node_modules/@firebase/auth",
    "@firebase/firestore": "file:../../node_modules/@firebase/firestore",
    "@firebase/functions": "file:../../node_modules/@firebase/functions",
    "aside-keys": "^0.0.2-alpha.5",
    "vue": "^3.2.11",
    "vue-router": "^4.0.10"
  },
  "devDependencies": {
    "@local/backend": "file:../backend",
    "@local/self": "file:.",
    "@local/tools": "file:../../tools",
    "@vitejs/plugin-vue": "^1.9.2",
    "@vue/compiler-sfc": "latest",
    "cypress": "^8.5.0",
    "eslint": "file:../../node_modules/eslint",
    "eslint-plugin-cypress": "^2.11.3",
    "eslint-plugin-node": "file:../../node_modules/eslint-plugin-node",
    "eslint-plugin-vue": "^7.17.0",
    "prettier": "2.4.1",
    "sass": "^1.35.1",
    "vite": "^2.6.2",
    "vue-eslint-parser": "^7.11.0"
  },
  "//comments": {
    "devDependencies": {
      "prettier": [
        "> when Prettier is installed or updated, it’s strongly recommended to specify the exact version in package.json: \"2.3.0\", not \"^2.3.0\".",
        "Thus, following suit."
      ],
      "sass": [
        "Needed if you use '<style scoped lang=\"scss\">' in your styles."
      ]
    },
    "dependencies": {
      "/not/ firebase": [
        "It's important we don't list 'firebase' as a peer dependency. Doing so would force 'app-ops-deploy' to pull in",
        "*all* the sub-packages (most of which are unnecessary).",
        "Instead, root defines the version and both us and 'app-ops-deploy' pull in the necessary '@firebase' modules, directly."
      ]
    },
    "engines.node": [
      "'>=14.3' for '—-harmony-top-level-await' (we don't use it)",
      "'>=13.2' for ES module support",
      "",
      "Avoid 16.6.0 -> https://github.com/facebook/jest/issues/11708"
    ],
    "scripts": {
      "| grep -v": [
        "Do *not* chain multiple 'grep -v's. That causes output to be completely hidden, for some reason.",
        "A single 'grep -v -E' (needs -E) with '|' is fine."
      ],
      "test / Cypress timeout": [
        "When cold-starting DC with 'npm test' on macOS, the 2nd test has been seen to take ~~5s~~ over 8s (default",
        "timeout is 4s). Thus, 'CYPRESS_defaultCommandTimeout'."
      ],
      "[ -z $BUILDER_OUTPUT ]": [
        "Precedes commands only to be run in CI."
      ],
      "ci:test": [
        "CI calls directly 'docker compose' since it's using a docker image that doesn't have 'npm'. We reflect the",
        "command here, mostly for just documenting the use."
      ],
      "_macNudgeEsbuild": [
        "After running under DC, 'node_modules/esbuild' has been installed with Linux underpinnings. To build at host",
        "(only if it's macOS), we need to nudge it back.", "Alternative would be running also the build under DC.",
        "Unfortunately, we cannot have two Vite's, can we???"
      ],
      "_touchEm": [
        "Vital for DC that files to be mapped to the container exist *before* the DC command."
      ]
    }
  }
}
