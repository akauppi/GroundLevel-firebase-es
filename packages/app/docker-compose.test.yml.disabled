#
# app/docker-compose.test.yml
#
# Like for 'dev[:local]' but pointing the front-end to use 'http://emul-for-app', instead of localhost.
#
#name: e80f4bdb
services:
  vite-dev:
    extends:
      file: dc.base.yml
      service: vite-base

    volumes:
      # --- RO
      - ../backend/firebase.app.js:/work/firebase.app.js:ro
      - ./tmp/.env.dev_test:/work/.env:ro
    environment:
      - MODE=local
    profiles: ['manual']

  # 'npm test' uses this, to have 'vite-dev' run in the background
  #
  vite-dev-launched:
    image: node:16-alpine
    command: sh -c true
    depends_on:
      vite-dev:
        condition: service_healthy
    profiles: ['manual']
